!function(){"use strict";var e="undefined"!=typeof window?window:global;if("function"!=typeof e.require){var t={},o={},n=function(e,t){return{}.hasOwnProperty.call(e,t)},r=function(e,t){var o,n,r=[];o=/^\.\.?(\/|$)/.test(t)?[e,t].join("/").split("/"):t.split("/");for(var s=0,u=o.length;u>s;s++)n=o[s],".."===n?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},u=function(t){return function(o){var n=s(t),u=r(n,o);return e.require(u,t)}},i=function(e,t){var n={id:e,exports:{}};return o[e]=n,t(n.exports,u(e),n),n.exports},a=function(e,s){var u=r(e,".");if(null==s&&(s="/"),n(o,u))return o[u].exports;if(n(t,u))return i(u,t[u]);var a=r(u,"./index");if(n(o,a))return o[a].exports;if(n(t,a))return i(a,t[a]);throw new Error('Cannot find module "'+e+'" from "'+s+'"')},l=function(e,o){if("object"==typeof e)for(var r in e)n(e,r)&&(t[r]=e[r]);else t[e]=o},c=function(){var e=[];for(var o in t)n(t,o)&&e.push(o);return e};e.require=a,e.require.define=l,e.require.register=l,e.require.list=c,e.require.brunch=!0}}(),require.register("src/bundles",function(e,t,o){var n,r,s,u,i,a;i=[t("./bundles/starter"),t("./bundles/quotes2")],r=["Starter","Quotes #2"],a=function(e,t,o){var n;return e?t===e.length-1?o>R.last(e)?R.append(o,R.slice(0,-1,e)):e:t>e.length-1?R.append(o,e):e:(n=R.times(R.always(0),t),R.append(o,n))},s=function(e,t){return null==t?{quoteIndex:0,bundleIndex:0}:t===i[e].length-1?{quoteIndex:0,bundleIndex:i[e+1]?e+1:0}:{quoteIndex:t+1,bundleIndex:e}},u=function(e,t){var o;return o=s(e,t),0===o.quoteIndex&&0===o.bundleIndex},n=function(e,t){var o;return o=s(e,t),0===o.quoteIndex},o.exports={quoteBundles:i,bundleNames:r,updateProgressPerBundle:a,getNextQuoteIndex:s,noMoreQuotes:u,bundleCompleted:n}}),require.register("src/bundles/quotes2",function(e,t,o){o.exports=[{quote:"If a tree falls in a forest and no one is around to hear it, does it make a sound?",source:"Philosophical thought experiment"},{quote:"You miss 100% of the shots you don’t take.",source:'Wayne Gretzky, the "greatest hockey player ever"'},{quote:"Life is what happens to you while you’re busy making other plans.",source:'"Beautiful Boy" lyrics by John Lennon'},{quote:"If all you have is a hammer, everything looks like a nail.",source:"Abraham Maslow"},{quote:"Be the change you wish to see in the world.",source:"Attributed to Mahatma Gandhi"},{quote:"Obstacles are what you see when you take your eyes off your goal.",source:"Henry Ford"},{quote:"Never try to teach a pig to sing; it wastes your time and it annoys the pig.",source:"Robert Heinlein (1907 - 1988) American Science Fiction Author"},{quote:"Two things are infinite: the universe and human stupidity; and I'm not sure about the universe.",source:"Albert Einstein"},{quote:"Did you know: Two thirds of the people on earth have never seen snow?",source:"Now you know"},{quote:'My Mama always said, "Life was like a box of chocolates; you never know what you\'re gonna get."',source:'Forrest Gump (Tom Hanks) in "Forrest Gump"'}]}),require.register("src/bundles/starter",function(e,t,o){o.exports=[{quote:"Happiness isn't having what you want, it's wanting what you have.",source:"Very old proverb"},{quote:"He who laughs last, laughs longest.",source:"Common idiom originating from an old English play"},{quote:"That's one small step for man, one giant leap for mankind.",source:"Neil Armstrong upon first ever lunar landing"},{quote:"Do... or do not. There is no try. Only do.",source:'Yoda in "Star Wars: Episode V - The Empire Strikes Back"'},{quote:"Talk sense to a fool and he calls you foolish.",source:"Euripides, Greek tragic dramatist (484 BC - 406 BC)"},{quote:"80% of success is just showing up.",source:"Woody Allen"},{quote:"If you choose not to decide, you still have made a choice.",source:'"Freewill" lyrics by Rush'},{quote:"Today is the tomorrow you worried about yesterday.",source:"Dale Carnegie, self-improvement author"},{quote:"You're almost to the end of the starter bundle!  Good job, keep going.",source:"Surprise!  Hi from the game's author.  How meta."},{quote:"Do not underestimate the power of the Force.",source:"Slight misquote of Darth Vader from Star Wars"}]}),require.register("src/game",function(e,t,o){var n,r,s,u,i,a,l,c,d,p;u=parent.kongregate,p=t("./bundles"),l=p.quoteBundles,r=p.bundleNames,s=p.getNextQuoteIndex,d=p.updateProgressPerBundle,i=p.noMoreQuotes,n=p.bundleCompleted,a=t("./persist"),c=t("./stats"),o.exports=function(){var e,t,o,p,g,h,f,m,v,y,b,w,x,k,I,S,D,E,P,M,H,q,Z,C,L,B,T,N,Q,O,F,A,G,U,K,V,j,Y,W,X,_,J,z,$,ee,te,oe,ne,re,se,ue,ie,ae,le,ce,de,pe,ge,he,fe,me,ve;return e={startingHints:3,hintSetback:40,pointsForFreeHint:200,pointsPerLetter:5},t={},o={backgroundMusic:1,keyPressHit:.9},ee=function(e){return t[e].play()},x=function(){return t.backgroundMusic},D=function(){return R.omit(["backgroundMusic"],t)},z=function(){return x().play()},_=function(){return x().pause()},$=function(){return R.forEach(function(e){return e[1].volume(o[e[0]]||1)},R.toPairs(D()))},J=function(){return R.forEach(function(e){return e.volume(0)},R.values(D()))},m=function(){return x().fadeIn(o.backgroundMusic,2e3)},f={HIDDEN:0,REVEALED:1,SOLVED:2,HINTED:3,HINTEDFILLED:4},q=function(e){return/[a-z]/i.test(e)},Z=function(e){return/[a-z\s]/i.test(e)},L=function(e){return/[\s]/i.test(e)},re=R.mapIndexed(function(e,t){return{index:t,status:e}}),I=function(e){var t,o,n;return n=Math.floor(Math.random()*e.length),o=e[n],t=R.remove(n,1,e),[o,t]},S=function(e,t){var o;return null==t&&(t=1),"number"!=typeof t&&(console.error("expected a number, got",t),t=1),(o=function(e,n){var r,s,u;return u=I(e),s=u[0],r=u[1],n.push(s),n.length===t?n:o(r,n)})(e,[])},w=function(t){return Math.floor(t/e.pointsForFreeHint)*e.pointsForFreeHint},k=R.compose(R.add(e.pointsForFreeHint),w),Q=function(t,o){var n,r;return r=t-o,n=k(r),Math.ceil(Math.max(0,o-(n-r))/e.pointsForFreeHint)},M=function(e){return q(e)?f.HIDDEN:f.SOLVED},H=R.eq(f.HIDDEN),C=R.eq(f.SOLVED),h=R.zipWith(function(e,t){return{"char":e,status:t}}),ue=function(e){var t;return t=function(e,t,o){var n;return Z(t)&&(L(t)?e.push([]):(n={"char":t,index:o},e[e.length-1].push(n))),e},R.reduceIndexed(t,[[]],e)},g=R.compose(R.join(""),R.map(R.prop("char"))),B=R.curry(function(e,t){var o;return o=function(t,o){return e[o.index]===f.SOLVED&&t++,t},R.reduce(o,0,t)!==t.length}),ie=function(e,t,o){return"function"==typeof e&&(e=e(t[o])),t[o]=e,t},ae=R.curry(function(e,t,o){return R.reduce(R.partial(ie,e),t,o)}),ce=ae(f.SOLVED),le=ae(function(e){var t;return t={},t[f.HIDDEN]=f.REVEALED,t[f.HINTED]=f.HINTEDFILLED,t[e]||e}),ne=function(e){var t,o;return t={},t[f.SOLVED]=f.SOLVED,t[f.HINTED]=f.HINTED,t[f.HINTEDFILLED]=f.HINTED,o=function(e){return t[e]||f.HIDDEN},R.map(o,e)},fe=function(e,t,o){var n,r,s;return s=new RegExp("^"+e,"i"),n=g(o),s.test(n)?(r=R.map(R.prop("index"))(R.take(e.length,o)),e.length===o.length?ce(t,r):le(t,r)):t},b=function(e,t,o){return t.length<1?o:(o=R.reduce(R.partial(fe,t),o,e),b(e,t.slice(1),o))},P=function(e,t){var o,n,r;return e.length<1?[]:(r=new RegExp("^"+e,"i"),n=R.compose(R.match(r),g),o=R.any(n,t),o?e:P(e.slice(1),t))},he={start:{onEnter:function(){return de("start")},onEvent:function(e,t,o,n){return"gameReady"===o?["loadingUser",t,n]:["start",t,n]},getRenderData:function(){return{secretMessage:[],feedback:"LOADING...",score:"",showPlayActions:!1}}},loadingUser:{onEnter:function(e,t){return de("loadingUser"),E(t)},onEvent:function(e,t,o,n){return"userLoaded"===o?["loading",t,e]:["loadingUser",t,n]},getRenderData:function(){return{secretMessage:[],feedback:"LOADING...",score:"",showPlayActions:!1}}},loading:{onEnter:function(e,t){return de("loading"),v(t)},onEvent:function(t,o,n,r){var s,u,i,a;return"quoteLoaded"===n?(u=function(e,t){var o;return o=function(e){return t[e]=f.HINTED},R.forEach(o,e)},i=t.message,a=t.source,s=R.map(M,i),r.progressPerBundle?0===r.progressPerBundle[0]?u([3,4],s):1===r.progressPerBundle[0]&&u([17],s):u([10,28,38,60],s),o.secretMessage=i,o.source=a,o.currentBundleIndex=t.bundleIndex,o.currentQuoteIndex=t.quoteIndex,o.comboGroups=ue(i),o.decodeKey=s,o.comboString="",o.score=R.filter(q,i).length*e.pointsPerLetter,o.moves=0,o.hints=0,o.lastCombo=null,["play",o,r]):["loading",o,r]},getRenderData:function(){return{secretMessage:[],feedback:"LOADING...",score:"",showPlayActions:!1}}},play:{onEnter:function(){return de("play")},onEvent:function(t,o,n,r){var s,u,i,a,l,p,g,h,m,v,y,w,x,k,I,D;if("giveUp"===n)return["gaveUp",o,r];if("hint"===n){if(r.hintsRemaining<=0)return["outOfHints",o,r];if(y=function(e){return Math.ceil(e/10)},p=re(o.decodeKey),a=R.filter(R.compose(H,R.prop("status")))(p),0===a.length)return["play",o,r];l=y(a.length),u=S(a,l),g=R.map(R.prop("index"),u),m=o.score-e.hintSetback<0?0:o.score-e.hintSetback,o.decodeKey=ae(f.HINTED,o.decodeKey,g),o.hints+=1,o.score=m,r.hintsRemaining-=1,se(r),w=function(e,t){return null==t&&(t=1),ee("keyPressMiss"),e>t?setTimeout(function(){return w(e,t+1)},120):void 0},w(l)}return"keyPress"===n&&(s=String.fromCharCode(t.keyCode).toLowerCase(),q(s)&&(x=o.comboString+s,i=ne(o.decodeKey),I=R.filter(B(o.decodeKey),o.comboGroups),o.moves+=1,o.score=Math.max(0,o.score-1),o.comboString=P(x,I),o.decodeKey=b(o.comboGroups,o.comboString,i),o.lastCombo=o.comboCompleted===!0?s:x,v=R.filter(B(o.decodeKey),o.comboGroups),o.comboCompleted=I.length>v.length,h=!!o.comboString.length,D=o.comboCompleted===!0,ee(D?"keyPressHit":h?"keyPressHit":"keyPressMiss")),k=R.length(R.filter(C)(o.decodeKey)),k===o.secretMessage.length)?(ee("solved"),r.totalScore+=o.score,r.hintsRemaining+=Q(r.totalScore,o.score),r.lastSolvedBundleIndex=o.currentBundleIndex,r.lastSolvedQuoteIndex=o.currentQuoteIndex,r.progressPerBundle=d(r.progressPerBundle,o.currentBundleIndex,o.currentQuoteIndex),c(r),se(r),["solved",o,r]):["play",o,r]},getRenderData:function(e){var t,o,n,r,s,u;return s=function(t,o){return q(e.secretMessage[o])},u=R.filterIndexed(s,e.decodeKey),o=function(e){return e===f.REVEALED||e===f.SOLVED||e===f.HINTEDFILLED},n=R.length(R.filter(o,u)),r=n/u.length,t=e.comboString.length?e.comboString:null,{secretMessage:h(e.secretMessage,e.decodeKey),feedback:t||e.lastCombo||"Type letters to begin revealing the hidden message.",match:e.lastCombo?!!e.comboString.length>0:null,score:e.score,showPlayActions:!0,progress:r}}},gaveUp:{onEnter:function(){return de("gaveUp")},onEvent:function(t,o,n,r){var s;return"confirm"===n?(ee("giveUp"),s=R.length(R.filter(R.compose(R.not,C))(o.decodeKey)),r.lastSolvedBundleIndex=o.currentBundleIndex,r.lastSolvedQuoteIndex=o.currentQuoteIndex,r.totalScore-=s*e.pointsPerLetter,r.progressPerBundle=d(r.progressPerBundle,o.currentBundleIndex,o.currentQuoteIndex),c(r),se(r),["confirmedGiveUp",o,r]):"cancel"===n?["play",o,r]:["gaveUp",o,r]},getRenderData:function(t){var o,n;return n=e.pointsPerLetter*R.length(R.filter(R.compose(R.not,C))(t.decodeKey)),o=t.comboString.length?t.comboString:null,{secretMessage:h(t.secretMessage,t.decodeKey),feedback:o||t.lastCombo||"Type letter combos to reveal the hidden message.",match:t.lastCombo?!!t.comboString.length>0:null,score:t.score,showPlayActions:!0,buyHints:!0,giveUp:!0,giveUpCost:n}}},confirmedGiveUp:{onEnter:function(){return de("confirmedGiveUp")},onEvent:function(e,t,o,r){return"keyPress"===o&&32===e.keyCode?(t.secretMessage=void 0,t.source=void 0,t.comboGroups=void 0,t.decodeKey=void 0,t.comboString=void 0,t.score=void 0,t.moves=void 0,t.hints=void 0,t.lastCombo=void 0,i(r.lastSolvedBundleIndex,r.lastSolvedQuoteIndex)?["noMoreQuotes",t,r]:n(r.lastSolvedBundleIndex,r.lastSolvedQuoteIndex)?["bundleCompleted",t,r]:["loading",t,r]):["confirmedGiveUp",t,r]},getRenderData:function(e){return{secretMessage:h(e.secretMessage,R.map(R.always(f.SOLVED),e.decodeKey)),source:e.source,gaveUp:!0,feedback:"You gave up!<br>Press 'Space bar' to play again.",score:0,showPlayActions:!1,showLogInLink:null!=u?u.services.isGuest():void 0}}},solved:{onEnter:function(){return de("solved")},onEvent:function(e,t,o,r){return"keyPress"===o&&32===e.keyCode?(t.secretMessage=void 0,t.source=void 0,t.comboGroups=void 0,t.decodeKey=void 0,t.comboString=void 0,t.score=void 0,t.moves=void 0,t.hints=void 0,t.lastCombo=void 0,i(r.lastSolvedBundleIndex,r.lastSolvedQuoteIndex)?["noMoreQuotes",t,r]:n(r.lastSolvedBundleIndex,r.lastSolvedQuoteIndex)?["bundleCompleted",t,r]:["loading",t,r]):["solved",t,r]},getRenderData:function(e){var t;return t=e.hints>1?e.hints:"no",{secretMessage:h(e.secretMessage,e.decodeKey),source:e.source,feedback:"SOLVED in "+e.moves+" moves!<br>Press 'Space bar' to play again.",score:e.score,showPlayActions:!1,solved:!0,showLogInLink:null!=u?u.services.isGuest():void 0}}},outOfHints:{onEnter:function(){return de("outOfHints")},onEvent:function(e,t,o,n){return"confirm"===o?["play",t,n]:["outOfHints",t,n]},getRenderData:function(e){var t;return t=e.comboString.length?e.comboString:null,{secretMessage:h(e.secretMessage,e.decodeKey),feedback:t||e.lastCombo||"Type letter combos to reveal the hidden message.",match:e.lastCombo?!!e.comboString.length>0:null,score:e.score,showPlayActions:!0,buyHints:!0}}},noMoreQuotes:{onEnter:function(){return de("noMoreQuotes")},onEvent:function(e,t,o,n){return"confirm"===o?["loading",t,n]:["noMoreQuotes",t,n]},getRenderData:function(){return{secretMessage:"",feedback:"",showPlayActions:!1,noMoreQuotes:!0}}},bundleCompleted:{onEnter:function(){return de("bundleCompleted")},onEvent:function(e,t,o,n){return"confirm"===o?["loading",t,n]:["bundleCompleted",t,n]},getRenderData:function(){return{secretMessage:"",feedback:"",showPlayActions:!1,bundleCompleted:!0}}}},y=function(e,t,o){var n,r,s,u;return u=e.state.onEvent(o,e.scope,t,e.userData),r=u[0],n=u[1],s=u[2],he[r]!==e.state&&he[r].onEnter(n,s),oe(he[r].getRenderData(n),n,s),{state:he[r],scope:n,userData:s}},me=function(e,t){var o,n,r,s,u;return s=G(this.store,this.currentState,e,t,this.userData),this.store=s[0],this.currentState=s[1],this.userData=s[2],u=y({state:this.currentState,scope:this.store,userData:this.userData},e,t),n=u.state,o=u.scope,r=u.userData,this.currentState=n,this.store=o,this.userData=r},me.userData={},me.store={},me.currentState=he.start,me=me.bind(me),G=function(e,t,o,n,r){return"toggleMuteMusic"===o&&(e.musicIsPaused?z():_(),e.musicIsPaused=!e.musicIsPaused),"toggleMuteSFX"===o&&(e.SFXIsPaused?$():J(),e.SFXIsPaused=!e.SFXIsPaused),"getHelp"===o&&(e.showHelp=!e.showHelp),"cancel"===o&&e.showHelp&&(e.showHelp=!e.showHelp),"loggedIn"===o&&(t=he.loadingUser,E(r)),[e,t,r]},v=function(e){var t,o,n;return o=s(e.lastSolvedBundleIndex,e.lastSolvedQuoteIndex),t=l[o.bundleIndex][o.quoteIndex].quote,n=l[o.bundleIndex][o.quoteIndex].source,setTimeout(function(){return me("quoteLoaded",{message:t,source:n,bundleIndex:o.bundleIndex,quoteIndex:o.quoteIndex})},0)},j=function(e){var t;return(8===(t=e.keyCode)||32===t||9===t||37===t||38===t||39===t||40===t)&&e.preventDefault(),me("keyPress",e)},U=function(e){return e.preventDefault(),me("giveUp",null)},V=function(e){return e.preventDefault(),me("hint",null)},W=function(e){return e.preventDefault(),me("toggleMuteMusic",null)},X=function(e){return e.preventDefault(),me("toggleMuteSFX",null)},K=function(e){return e.preventDefault(),me("getHelp",null)},F=function(e){return e.preventDefault(),me("cancel",null)},A=function(e){return e.preventDefault(),me("confirm",null)},Y=function(){return me("loggedIn",null)},p=function(e){var t,o;return o=R.invertObj(f),t=function(e,t){var n,r,s;return L(t["char"])?(n="",/[\n\r]/.test(t["char"])&&(n="<br>"),e+("</span>"+n+"<span class='word'>")):(s=t["char"],t.status===f.HIDDEN&&(s=" "),r=o[t.status].toLowerCase(),e+("<span class='letter "+r+"'>"+s+"</span>"))},R.reduce(t,"<span class='word'>",e)+"</span>"},oe=function(e,t,o){var n,s,i,a,c,d,g,h,f,m,v,y,b,w,x,R,I,S,D,E,P,M,H,q,Z,C,L,B,T;return d=Zepto("#secret-message"),g=Zepto("#source"),n=Zepto("#feedback"),s=Zepto("#feedback #message"),c=Zepto("#score"),i=Zepto("#mute-music-button"),a=Zepto("#mute-sfx-button"),C=e.secretMessage,B=e.source,m=e.feedback,Z=e.score,L=e.showPlayActions,x=e.match,f=e.buyHints,v=e.giveUp,y=e.giveUpCost,d.html(p(C)),s.html(m),c.text(Z),n.removeClass("no-match"),n.removeClass("match"),x===!0&&n.addClass("match"),x===!1&&n.addClass("no-match"),g.hide(),(e.solved||e.gaveUp)&&(g.show(),g.text(B||"Unknown")),e.showLogInLink?Zepto("#feedback .login-link").show():Zepto("#feedback .login-link").hide(),e.solved?Zepto("#share").show():Zepto("#share").hide(),L?Zepto("#play-actions").show():Zepto("#play-actions").hide(),Zepto("#hint-button .hints-remaining").text(o.hintsRemaining),i.removeClass("muted"),a.removeClass("muted"),t.musicIsPaused&&i.addClass("muted"),t.SFXIsPaused&&a.addClass("muted"),Zepto("#dialog").hide(),f&&(Zepto("#dialog #cancel").hide(),Zepto("#dialog #confirm").show(),S=k(o.totalScore),H=k(o.totalScore)-o.totalScore,Zepto("#dialog").show(),Zepto("#dialog h3").text("You are out of hints!"),Zepto("#dialog #message-content").html("Next free hint awarded at "+S+" points ("+H+" points to go)"),Zepto("#dialog #confirm").text("OK")),v&&(Zepto("#dialog #cancel").show(),Zepto("#dialog #confirm").show(),Zepto("#dialog").show(),Zepto("#dialog h3").text("Are you sure you want to give up?"),Zepto("#dialog #message-content").html("You will lose "+y+" points for the remaining unsolved words."),Zepto("#dialog #confirm").text("Yes, give up"),Zepto("#dialog #cancel").text("No, I'll keep trying")),e.noMoreQuotes&&(Zepto("#dialog #cancel").hide(),Zepto("#dialog #confirm").show(),Zepto("#dialog").show(),Zepto("#dialog h3").text("You solved all of the quotes!"),Zepto("#dialog #message-content").html("<p>Thank you for playing. Check back for more quote bundles. If you enjoyed playing, please tell a friend!</p>"),Zepto("#dialog #confirm").text("Play again?")),h=r[t.currentBundleIndex||0],I=r[(t.currentBundleIndex||0)+1],e.bundleCompleted&&(Zepto("#dialog #cancel").hide(),Zepto("#dialog #confirm").show(),Zepto("#dialog").show(),Zepto("#dialog h3").text('Congratulations, you finished the "'+h+'" bundle!'),Zepto("#dialog #message-content").html("You've unlocked the \""+I+'" bundle.'),Zepto("#dialog #confirm").text("Play next bundle")),t.showHelp&&(Zepto("#dialog #cancel").show(),Zepto("#dialog #confirm").hide(),Zepto("#dialog").show(),Zepto("#dialog h3").text("Help"),Zepto("#dialog #message-content").html("<p>Stuck?  You must reveal the secret message one letter at a time, from the start of each word.  Solving each word will give you a clue to which letters other words start with.  Try going for shorter word first.  The words stay solved only when you complete them.  You can always use a hint or give up, but it will cost you.  Good luck!</p>\n<h3>Credits</h3>\n<ul>\n  <li>Game designed and built by <a target='_blank' href='http://codeperfectionist.com/about'>Jeff Schomay</a></li>\n  <li>Music by Jamison Rivera\n  <li>Owl character by <a target='_blank' href='http://sherony.com'>Sherony Lock</a></li>\n  <li>Sound effects by <a target='_blank' href='https://www.freesound.org/people/ddohler/sounds/9098/'>ddohler</a>,\n  <a target='_blank' href='https://www.freesound.org/people/Horn/sounds/9744/'>Horn</a>,\n  <a target='_blank' href='https://www.freesound.org/people/NHumphrey/sounds/204466/'>NHumphrey</a>, and\n  <a target='_blank' href='https://www.freesound.org/people/lonemonk/sounds/47048/'>lonemonk</a></li>\n  <li>Special thanks to: Mark, Marcus, Zia, David, Joey, Molly and Michele</li>\n</ul>"),Zepto("#dialog #cancel").text("Keep playing")),D=(t.currentQuoteIndex||0)+1,h=r[t.currentBundleIndex||0],T=l[t.currentBundleIndex||0].length,Zepto("#user-info").show(),Zepto("#progress").html('Bundle: "'+h+'"<br>#'+D+" out of "+T),Zepto("#total-score").text(o.totalScore),(null!=u?u.services.isGuest():void 0)?Zepto("#user-info .login-link").show():Zepto("#user-info .login-link").hide(),P=Zepto("#owl").width(),b=200,M=window.innerWidth-b-P,q=e.progress||0,E=M*q+b/2,w=15,R=function(e,t){return Zepto("#owl").css({"-webkit-transform":"translate3d("+e+"px, -"+t+"px, 0)","-ms-transform":"translate3d("+e+"px, -"+t+"px, 0)",transform:"translate3d("+e+"px, -"+t+"px, 0)"})},e.solved?R(window.innerWidth-(P+10),70):R(E,w),setTimeout(function(){return e.solved?void 0:R(E,0)},70)},O=function(e){return R.length(R.filter(R.compose(R.identity,R.prop("_loaded")),R.values(e)))},ve=function(e,t){return O(t)===e?pe():void 0},N=function(e){var o,n,r,s;return s=R.length(R.keys(e)),o=[".ogg",".m4a",".wav"],n=function(e){return R.map(R.concat(e),o)},r=function(e,t){var o;return o=function(){return"string"==typeof t[1]?{urls:n(t[1]),onload:function(){return ve(s,e)}}:R.merge(t[1][1],{urls:n(t[1][0]),onload:function(){return ve(s,e)}})},e[t[0]]=new Howl(o()),e},R.reduce(r,t,R.toPairs(e))},T=function(e){var t,o;return o=function(e){var t;return t=new Image,t.src=e,t},(t=R.map(o))(e)},te=function(){var e;return e=T(["assets/owl-normal.png","assets/owl-happy.png","assets/owl-sad.png","assets/owl-blink.png"]),N({keyPressMiss:"assets/key-press-miss",keyPressHit:["assets/key-press-hit",{volume:o.keyPressHit}],giveUp:"assets/give-up",solved:"assets/solved",backgroundMusic:["assets/background-music-long",{volume:o.backgroundMusic,onend:function(){return this.play()}}]})},de=function(e){return Zepto("body").removeClass(),Zepto("body").addClass(e)},ge=function(){var e,t;return t=function(){return Zepto("#owl").toggleClass("blink")},e=function(){return t(),setTimeout(t,200),setTimeout(e,8e3+5e3*(Math.random()-.5))},setTimeout(e,5e3),setTimeout(e,7e3)},pe=function(){return Zepto(function(e){return m(),e(".popup").click(function(){var t,o,n,r,s,u;return u=575,t=400,o=(e(window).width()-u)/2,r=(e(window).height()-t)/2,s=this.href,n="status=1,width="+u+",height="+t+",top="+r+",left="+o,window.open(s,"Share",n),!1}),e(document).on("keydown",j),e("#give-up-button").on("click",U),e("#hint-button").on("click",V),e("#mute-music-button").on("click",W),e("#mute-sfx-button").on("click",X),e("#help-button").on("click",K),e("#cancel").on("click",F),e("#confirm").on("click",A),e(".login-link").on("click",function(){return null!=u?u.services.showSignInBox():void 0}),null!=u&&u.services.addEventListener("login",Y),ge(),me("gameReady")})},E=function(t){var o,n,r;return o={hintsRemaining:e.startingHints,totalScore:0,lastSolvedBundleIndex:void 0,lastSolvedQuoteIndex:void 0,progressPerBundle:void 0},n=R.values(t).length,r=n?t:o,a.load().then(function(e){var t,o;return e?(t=e.toJSON(),o=t.plays||0,t.plays=o+1,se(t),me("userLoaded",R.merge(r,t))):(se(r),me("userLoaded",r))},function(e){return console.error("Error loading user data:",e),me("userLoaded",r)})},se=function(e){return a.save(e)},te()}}),require.register("src/persist",function(e,t,o){var n,r,s,u;s=parent.kongregate,Parse.initialize("iul0cVOM5mJWAj1HHBa158cpMoyEQ2wWxSK3Go9O","pbFnYPVaSunEmgjI8qTKqkW8nHKoB6Xor1DtOWpD"),r=function(){var e,t;return e=!1,s?s.services.isGuest()?void 0:t=s.services.getUserId():e?"mockUser":void 0},n=Parse.Object.extend("KongregatePlayer"),u=void 0,o.exports={save:function(e){var t;return(t=r())?u?u.save(e).then(function(){return!0},function(e){return console.error(e)}):(u=new n,u.set("userId",""+t),u.save(e).then(function(){return!0},function(e){return console.error(e)})):void 0},load:function(){var e,t,o,s;return s=r(),s?(o=new Parse.Query(n),o.equalTo("userId",""+s),t=o.first(),t.then(function(e){return e?u=e:void 0},function(e){return console.error(e)}),t):(e=new Parse.Promise,setTimeout(function(){return e.resolve()},0),e)}}}),require.register("src/stats",function(e,t,o){var n,r;r=parent.kongregate||{stats:{submit:console.log.bind(console)}},n=t("./bundles").bundleCompleted,o.exports=function(e){var t,o,s;return r.stats.submit("HighScore",e.totalScore),s=function(e,t){return e+t+1},o=R.reduce(s,0,e.progressPerBundle),r.stats.submit("NumCompletedQuotes",o),t=n(e.lastSolvedBundleIndex,e.lastSolvedQuoteIndex),t&&2===e.progressPerBundle.length&&r.stats.submit("Quotes2BundleCompleted",1),t&&1===e.progressPerBundle.length?r.stats.submit("StarterBundleComplete",1):void 0}});